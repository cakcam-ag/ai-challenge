<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Day 6 ‚Äî Subagents Interaction</title>

<style>
body {
    background: #111;
    color: #eee;
    font-family: Inter, sans-serif;
    margin: 0;
    padding: 0;
}

.container {
    padding: 40px;
    max-width: 1200px;
    margin: 0 auto;
}

h1 {
    color: #4CAF50;
    margin-bottom: 10px;
}

.subtitle {
    color: #888;
    margin-bottom: 30px;
}

textarea {
    width: 100%;
    height: 120px;
    background: #1e1e1e;
    color: #fff;
    border: 1px solid #333;
    border-radius: 6px;
    padding: 10px;
    font-size: 16px;
    box-sizing: border-box;
}

button {
    background: #0e6efd;
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 12px;
    font-size: 16px;
    font-weight: bold;
}

button:hover {
    background: #0c5bd4;
}

button:disabled {
    background: #555;
    cursor: not-allowed;
}

.agents-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 30px;
}

.agent-box {
    background: #1e1e1e;
    padding: 20px;
    border-radius: 6px;
    border: 2px solid #333;
}

.agent-box.agent1 {
    border-color: #4CAF50;
}

.agent-box.agent2 {
    border-color: #FF9800;
}

.agent-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #333;
}

.agent-title {
    font-size: 18px;
    font-weight: bold;
}

.agent-title.agent1 {
    color: #4CAF50;
}

.agent-title.agent2 {
    color: #FF9800;
}

.agent-model {
    font-size: 12px;
    color: #888;
    background: #2a2a2a;
    padding: 4px 8px;
    border-radius: 4px;
}

.output-box {
    background: #0a0a0a;
    padding: 15px;
    border-radius: 4px;
    margin-top: 10px;
    white-space: pre-wrap;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    max-height: 400px;
    overflow-y: auto;
}

.output-box.success {
    color: #b5f5b0;
    border-left: 3px solid #4CAF50;
}

.output-box.error {
    color: #ff6b6b;
    border-left: 3px solid #dc3545;
}

.output-box.empty {
    color: #666;
    font-style: italic;
}

.interaction-flow {
    text-align: center;
    margin: 20px 0;
    color: #888;
    font-size: 14px;
}

.interaction-flow::before {
    content: "Agent 1 ‚Üí Agent 2";
    display: block;
    margin-bottom: 10px;
    font-weight: bold;
    color: #4CAF50;
}

.loading {
    color: #4CAF50;
    font-style: italic;
}

.step-list {
    margin: 10px 0;
    padding-left: 20px;
}

.step-list li {
    margin: 8px 0;
    color: #b5f5b0;
}

.metadata {
    font-size: 12px;
    color: #888;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid #333;
}
</style>
</head>

<body>
<div class="container">
    <h1>ü§ñ Day 6 ‚Äî Subagents Interaction</h1>
    <p class="subtitle">Two agents working together: Agent 1 (Planner) creates a plan, Agent 2 (Reviewer) improves it</p>

    <h3>Enter Your Problem</h3>
    <textarea id="problemInput" placeholder="Describe a problem you want to solve... (e.g., 'I want to learn Python programming', 'I need to organize my team meeting', 'I want to start a blog')"></textarea>

    <button id="processBtn" onclick="processAgents()">üöÄ Run Agents</button>

    <div class="interaction-flow">
        <div>Agent 1 generates plan ‚Üí Agent 2 reviews & improves</div>
    </div>

    <div class="agents-container">
        <div class="agent-box agent1">
            <div class="agent-header">
                <div class="agent-title agent1">Agent 1: Planner</div>
                <div class="agent-model" id="agent1Model">gpt-5.1</div>
            </div>
            <div id="agent1Output" class="output-box empty">Waiting for input...</div>
        </div>

        <div class="agent-box agent2">
            <div class="agent-header">
                <div class="agent-title agent2">Agent 2: Reviewer</div>
                <div class="agent-model" id="agent2Model">gpt-5.1</div>
            </div>
            <div id="agent2Output" class="output-box empty">Waiting for Agent 1...</div>
        </div>
    </div>
</div>

<script>
async function processAgents() {
    const problemInput = document.getElementById("problemInput").value.trim();
    const processBtn = document.getElementById("processBtn");
    const agent1Output = document.getElementById("agent1Output");
    const agent2Output = document.getElementById("agent2Output");

    if (!problemInput) {
        alert("Please enter a problem!");
        return;
    }

    // Disable button and show loading
    processBtn.disabled = true;
    processBtn.textContent = "‚è≥ Processing...";
    
    agent1Output.className = "output-box loading";
    agent1Output.textContent = "Agent 1 is generating a plan...";
    
    agent2Output.className = "output-box empty";
    agent2Output.textContent = "Waiting for Agent 1...";

    try {
        const response = await fetch("/process", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({user_input: problemInput})
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        // Display Agent 1 output
        if (data.agent1 && data.agent1.success) {
            const plan = data.agent1.plan;
            let output = "‚úÖ Plan Generated Successfully\n\n";
            output += "üìã Steps:\n";
            if (plan.steps) {
                output += plan.steps.map((step, i) => `${i + 1}. ${step}`).join("\n");
            }
            if (plan.reasoning) {
                output += `\n\nüí≠ Reasoning: ${plan.reasoning}`;
            }
            output += `\n\nüìÑ Raw JSON:\n${data.agent1.raw_output}`;
            
            agent1Output.className = "output-box success";
            agent1Output.textContent = output;
        } else {
            agent1Output.className = "output-box error";
            agent1Output.textContent = `‚ùå Error: ${data.agent1?.error || "Unknown error"}\n\nRaw output:\n${data.agent1?.raw_output || "No output"}`;
        }

        // Display Agent 2 output
        if (data.agent2 && data.agent2.success) {
            const review = data.agent2.review;
            let output = "‚úÖ Review Complete\n\n";
            output += "‚ú® Improved Steps:\n";
            if (review.improved_steps) {
                output += review.improved_steps.map((step, i) => `${i + 1}. ${step}`).join("\n");
            }
            if (review.changes_made) {
                output += `\n\nüîß Changes Made: ${review.changes_made}`;
            }
            if (review.validation) {
                output += `\n\n‚úÖ Validation: ${review.validation}`;
            }
            output += `\n\nüìÑ Raw JSON:\n${data.agent2.raw_output}`;
            
            agent2Output.className = "output-box success";
            agent2Output.textContent = output;
        } else {
            agent2Output.className = "output-box error";
            agent2Output.textContent = `‚ùå Error: ${data.agent2?.error || "Unknown error"}\n\nRaw output:\n${data.agent2?.raw_output || "No output"}`;
        }

        // Show interaction status
        if (data.interaction_success) {
            console.log("‚úÖ Both agents completed successfully!");
        }

    } catch (error) {
        agent1Output.className = "output-box error";
        agent1Output.textContent = `‚ùå Error: ${error.message}`;
        
        agent2Output.className = "output-box error";
        agent2Output.textContent = `‚ùå Error: ${error.message}`;
    } finally {
        processBtn.disabled = false;
        processBtn.textContent = "üöÄ Run Agents";
    }
}
</script>

</body>
</html>

